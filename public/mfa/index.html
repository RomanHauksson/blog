<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>üîê the 2/3 rule for multi-factor authentication | Roman Hauksson</title><meta name=keywords content="üîí cybersecurity"><meta name=description content="I propose the &#34;2/3 rule&#34; for multi-factor authentication: to access a system, a user must pass at least two out of three possible methods for authentication. Unlike standard 2-factor authentication, this strategy protects against both false positives (granting access to a hacker) and false negatives (denying access to a legitimate user)."><meta name=author content><link rel=canonical href=https://roman.computer/MFA><link crossorigin=anonymous href=/assets/css/stylesheet.855e48320613a3e8fc0ca0ac97a03a5c8da75978d3f5e325dc8e2dd8f8b5c146.css integrity="sha256-hV5IMgYTo+j8DKCsl6A6XI2nWXjT9eMl3I4t2Pi1wUY=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://hugo.roman.computer/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hugo.roman.computer/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hugo.roman.computer/favicon-32x32.png><link rel=apple-touch-icon href=https://hugo.roman.computer/apple-touch-icon.png><link rel=mask-icon href=https://hugo.roman.computer/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})'></script><meta property="og:title" content="üîê the 2/3 rule for multi-factor authentication"><meta property="og:description" content="I propose the &#34;2/3 rule&#34; for multi-factor authentication: to access a system, a user must pass at least two out of three possible methods for authentication. Unlike standard 2-factor authentication, this strategy protects against both false positives (granting access to a hacker) and false negatives (denying access to a legitimate user)."><meta property="og:type" content="article"><meta property="og:url" content="https://hugo.roman.computer/mfa/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-03T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-03T00:00:00+00:00"><meta property="og:site_name" content="Roman Hauksson"><meta name=twitter:card content="summary"><meta name=twitter:title content="üîê the 2/3 rule for multi-factor authentication"><meta name=twitter:description content="I propose the &#34;2/3 rule&#34; for multi-factor authentication: to access a system, a user must pass at least two out of three possible methods for authentication. Unlike standard 2-factor authentication, this strategy protects against both false positives (granting access to a hacker) and false negatives (denying access to a legitimate user)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hugo.roman.computer/posts/"},{"@type":"ListItem","position":2,"name":"üîê the 2/3 rule for multi-factor authentication","item":"https://hugo.roman.computer/mfa/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"üîê the 2/3 rule for multi-factor authentication","name":"üîê the 2\/3 rule for multi-factor authentication","description":"I propose the \"2/3 rule\" for multi-factor authentication: to access a system, a user must pass at least two out of three possible methods for authentication. Unlike standard 2-factor authentication, this strategy protects against both false positives (granting access to a hacker) and false negatives (denying access to a legitimate user).","keywords":["üîí cybersecurity"],"articleBody":"multi-factor authentication When you sign into an online service, you‚Äôre required to provide a username to identify who you are and a password to prove that you are who you say you are. Anyone can claim that they‚Äôre romanhn on GitHub, but only I know my GitHub password. But if a hacker breaches GitHub‚Äôs servers and publishes a list of everyone‚Äôs password,1 knowing my password is no longer proof of anything. This is the motivation behind two- or multi-factor authentication (MFA): to access my GitHub account, not only would you have to know my password, but you‚Äôd need to authenticate yourself using an additional factor, like tapping a notification on my phone.\nadapted from sketchplanations\nI‚Äôll use the ‚ÄúSwiss cheese model‚Äù, shown above, to explain how multi-factor authentication provides security through redundancy. If a hacker can bypass one hole (knows my password) they have to find a hole in another layer (get me to tap the notification) in order to hack my account.\ncategories of factors A user can use any of three categories of factors to authenticate themself:2\nA piece of information only they know, like a password or PIN. A physical object only they possess, like a key or security token. A physical characteristic only they display, like a fingerprint or voice pattern. Each layer should be a different category because different factors in the same category are often breached simultaneously, as if they were sliced from the same section of the cheese block so their holes were in similar places. For example, if I fell victim to a phishing attack, the hacker would discover all the ‚Äúpieces of information only I know‚Äù in one fell swoop. Asking the hacker ‚Äúwhat was the name of your first pet?‚Äù doesn‚Äôt provide any additional security if they discovered my password and my first pet‚Äôs name at the same time.\nThis is the same idea behind the 3-2-1 rule for backing up data.\nYou should maintain three copies of anything you care about: two copies in different formats and one off-site backup.\nLike with authentication, redundancy in backups is best when it is spread across different modalities. Instead of protecting against a phishing attack, however, it prevents a house fire from wiping out your baby photo collection because you never stored a copy in the cloud.\nthe problem with MFA While MFA makes it harder for a hacker to breach an account, it also makes it easier for a legitimate user to get locked out. People lose their cell phones and biometric sensors fail, all the time. And this matters because getting locked out is often worse than your account being hacked ‚Äì I would rather let a hacker download all of the data in my Google Photos account than lose access to it permanently.\nSuppose that a laptop can be accessed using three authentication factors (entering a password, confirming via an SMS text, and scanning a fingerprint), and they each have false positive (hacker successfully bypasses) and false negative (a user fails to pass) rates of 1%. Different multi-factor authentication schemes combining these factors have new rates, as shown by the confusion matrices below.3\nonly password required user access granted access denied legitimate 99.00% 1.00% hacker 1.00% 99.00% password and SMS required user access granted access denied legitimate 98.01% 1.99% hacker 0.01% 99.99% password, SMS, and fingerprint required user access granted access denied legitimate ~97.03% ~2.97% hacker 0.0001% 99.9999% With each additional factor, the chance that a hacker could successfully break in decreases exponentially (1% -\u003e 0.01% -\u003e 0.001%). However, the chance that a legitimate user gets locked out increases ~linearly (1% -\u003e 1.99% -\u003e ~2.97%). The probability that ‚Äúsomething bad happens‚Äù is actually greater when three factors are required instead of two.4\nthe 2/3 rule To combat against false negatives and false positives simultaneously, I propose the ‚Äú2/3 rule‚Äù for multi-factor authentication:\nA system should have in place three methods, in different modalities, for authenticating a legitimate user. The user is granted access to the system as long as they can pass at least two out of the three methods.5\nThis provides redundancy on both fronts: a malicious actor must crack at least two methods to breach an account, and a legitimate user must fail at least two methods to be locked out. It‚Äôs like a castle with a moat and cannons to thwart invaders, as well as guardrails and nets to prevent the king from falling into the moat.\nThe confusion matrix for this combination demonstrates how the 2/3 strategy provides symmetric redundancy:\nat least two of password, TOTP, or fingerprint user access granted access denied legitimate ~99.97% ~0.03% hacker ~0.03% ~99.97% While the chance that a hacker breaks into a 2/3 system is higher than the original 2- or 3-factor systems (~0.03% \u003e 0.01% \u003e 0.0001%), the chance that a user gets locked out is dramatically lower, even more so than the 1-factor system (0.03% \u003c 1.00%). This means that the overall chance of being hacked or locked out is lower than any other system.\nthis is nothing new That being said, this strategy is already in use; I just wanted to give a name to it. For example, if you have 2-factor authentication enabled on your Google or Facebook accounts, they will allow you to receive a code from a text message in case you don‚Äôt have your TOTP generator on you.\nOkay, a more realistic situation is ‚Äúa hacker breaches GitHub‚Äôs servers, downloads a list of everyone‚Äôs password hashes, cracks the easiest ones, and sells the list to another hacker on some forum‚Äù, but the same idea holds.¬†‚Ü©Ô∏é\nThere are other categories like ‚Äúsomewhere you are‚Äù, which is measured by the user‚Äôs IP address at the time of login.¬†‚Ü©Ô∏é\nThe probability that a legitimate user is denied access is $1-0.99^n$ , where $n$ is the number of factors required. Similarly, the probability that a hacker is granted access is $0.01^n$ . This model becomes more complicated if different factors have different false positive/negative rates or are combined in different ways (for example, one scheme could require either a password or a fingerprint).¬†‚Ü©Ô∏é\nThis explicitly assumes that any given login attempt has an equal chance of being malicious or legitimate, and it implicitly assumes that the ‚Äúhacked‚Äù and ‚Äúlocked out‚Äù events are equally bad. Neither of these assumptions are true for most systems.¬†‚Ü©Ô∏é\nUsing the fourth category of authentication factors ‚Äúlocation‚Äù, one could implement a ‚Äú2/4‚Äù or ‚Äú3/4‚Äù strategy.¬†‚Ü©Ô∏é\n","wordCount":"1073","inLanguage":"en","datePublished":"2023-02-03T00:00:00Z","dateModified":"2023-02-03T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://hugo.roman.computer/mfa/"},"publisher":{"@type":"Organization","name":"Roman Hauksson","logo":{"@type":"ImageObject","url":"https://hugo.roman.computer/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hugo.roman.computer/ accesskey=h title="Roman Hauksson (Alt + H)">Roman Hauksson</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<img src=/sun.png id=sun class=theme-toggle-icon>
<img src=/moon.png id=moon class=theme-toggle-icon></button></div></div><ul id=menu><li><a class=link href=https://hugo.roman.computer/posts/ title=posts><span>posts</span></a></li><li><a class=link href=https://hugo.roman.computer/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://hugo.roman.computer/>Home</a>&nbsp;¬ª&nbsp;<a href=https://hugo.roman.computer/posts/>Posts</a></div><h1 class=post-title>üîê the 2/3 rule for multi-factor authentication</h1><div class=post-description>I propose the "2/3 rule" for multi-factor authentication: to access a system, a user must pass at least two out of three possible methods for authentication. Unlike standard 2-factor authentication, this strategy protects against both false positives (granting access to a hacker) and false negatives (denying access to a legitimate user).</div><div class=post-meta><span title='2023-02-03 00:00:00 +0000 UTC'>2023 Feb 3</span>&nbsp;¬∑&nbsp;6 min</div><ul class=post-tags><li><a class=post-tag href=https://hugo.roman.computer/tags/cybersecurity/>üîí cybersecurity</a></li></ul></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>table of contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#multi-factor-authentication>multi-factor authentication</a></li><li><a href=#categories-of-factors>categories of factors</a></li><li><a href=#the-problem-with-mfa>the problem with MFA</a></li><li><a href=#the-23-rule>the 2/3 rule</a></li><li><a href=#this-is-nothing-new>this is nothing new</a></li></ul></nav></div></details></div><div class=post-content><h2 id=multi-factor-authentication>multi-factor authentication<a hidden class=anchor aria-hidden=true href=#multi-factor-authentication>#</a></h2><p>When you sign into an online service, you&rsquo;re required to provide a username to identify <em>who you are</em> and a password to prove that <em>you are who you say you are</em>. Anyone can claim that they&rsquo;re <a href=https://github.com/romanhn><code>romanhn</code> on GitHub</a>, but only I know my GitHub password. But if a hacker breaches GitHub&rsquo;s servers and publishes a list of everyone&rsquo;s password,<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> knowing my password is no longer proof of anything. This is the motivation behind two- or multi-factor authentication (MFA): to access my GitHub account, not only would you have to know my password, but you&rsquo;d need to authenticate yourself using an additional factor, like tapping a notification on my phone.</p><figure><p><img loading=lazy src=/swiss_cheese_model.png alt></p><figcaption><p><em>adapted from <a href=https://sketchplanations.com/the-swiss-cheese-model>sketchplanations</a></em></p></figcaption></figure><p>I&rsquo;ll use the &ldquo;Swiss cheese model&rdquo;, shown above, to explain how multi-factor authentication provides security through redundancy. If a hacker can bypass one hole (knows my password) they have to find a hole in another layer (get me to tap the notification) in order to hack my account.</p><h2 id=categories-of-factors>categories of factors<a hidden class=anchor aria-hidden=true href=#categories-of-factors>#</a></h2><p>A user can use any of three categories of factors to authenticate themself:<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><ol><li>A piece of information only they know, like a password or PIN.</li><li>A physical object only they possess, like a key or security token.</li><li>A physical characteristic only they display, like a fingerprint or voice pattern.</li></ol><p>Each layer should be a different category because different factors in the same category are often breached simultaneously, as if they were sliced from the same section of the cheese block so their holes were in similar places. For example, if I fell victim to a <a href=https://en.wikipedia.org/wiki/Phishing>phishing attack</a>, the hacker would discover all the &ldquo;pieces of information only I know&rdquo; in one fell swoop. Asking the hacker &ldquo;what was the name of your first pet?&rdquo; doesn&rsquo;t provide any additional security if they discovered my password and my first pet&rsquo;s name at the same time.</p><p>This is the same idea behind the <a href=https://www.hanselman.com/blog/the-computer-backup-rule-of-three>3-2-1 rule</a> for backing up data.</p><blockquote><p>You should maintain <strong>three</strong> copies of anything you care about: <strong>two</strong> copies in different formats and <strong>one</strong> off-site backup.</p></blockquote><p>Like with authentication, redundancy in backups is best when it is spread across different modalities. Instead of protecting against a phishing attack, however, it prevents a house fire from wiping out your baby photo collection because you never stored a copy in the cloud.</p><h2 id=the-problem-with-mfa>the problem with MFA<a hidden class=anchor aria-hidden=true href=#the-problem-with-mfa>#</a></h2><p>While MFA makes it harder for a hacker to breach an account, <em>it also makes it easier for a legitimate user to get locked out</em>. People lose their cell phones and biometric sensors fail, all the time. And this matters because getting locked out is often <em>worse</em> than your account being hacked ‚Äì I would rather let a hacker download all of the data in my Google Photos account than lose access to it permanently.</p><p>Suppose that a laptop can be accessed using three authentication factors (entering a password, confirming via an SMS text, and scanning a fingerprint), and they each have <a href=https://en.wikipedia.org/wiki/False_positives_and_false_negatives>false positive</a> (hacker successfully bypasses) and <a href=https://en.wikipedia.org/wiki/False_positives_and_false_negatives>false negative</a> (a user fails to pass) rates of 1%. Different multi-factor authentication schemes combining these factors have new rates, as shown by the <a href=https://en.wikipedia.org/wiki/Confusion_matrix>confusion matrices</a> below.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p><figure><figcaption>only password required</figcaption><table><thead><tr><th>user</th><th>access granted</th><th>access denied</th></tr></thead><tbody><tr><td>legitimate</td><td>99.00%</td><td>1.00%</td></tr><tr><td>hacker</td><td>1.00%</td><td>99.00%</td></tr></tbody></table></figure><figure><figcaption>password and SMS required</figcaption><table><thead><tr><th>user</th><th>access granted</th><th>access denied</th></tr></thead><tbody><tr><td>legitimate</td><td>98.01%</td><td>1.99%</td></tr><tr><td>hacker</td><td>0.01%</td><td>99.99%</td></tr></tbody></table></figure><figure><figcaption>password, SMS, and fingerprint required</figcaption><table><thead><tr><th>user</th><th>access granted</th><th>access denied</th></tr></thead><tbody><tr><td>legitimate</td><td>~97.03%</td><td>~2.97%</td></tr><tr><td>hacker</td><td>0.0001%</td><td>99.9999%</td></tr></tbody></table></figure><p>With each additional factor, the chance that a hacker could successfully break in decreases exponentially (1% -> 0.01% -> 0.001%). However, the chance that a legitimate user gets locked out <em>increases ~linearly</em> (1% -> 1.99% -> ~2.97%). The probability that &ldquo;something bad happens&rdquo; is actually greater when three factors are required instead of two.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></p><h2 id=the-23-rule>the 2/3 rule<a hidden class=anchor aria-hidden=true href=#the-23-rule>#</a></h2><p>To combat against false negatives and false positives simultaneously, I propose the &ldquo;2/3 rule&rdquo; for multi-factor authentication:</p><blockquote><p>A system should have in place three methods, in different modalities, for authenticating a legitimate user. The user is granted access to the system as long as they can pass at least two out of the three methods.<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></p></blockquote><p>This provides redundancy on both fronts: a malicious actor must crack at least two methods to breach an account, and a legitimate user must fail at least two methods to be locked out. It&rsquo;s like a castle with a moat and cannons to thwart invaders, <em>as well as</em> guardrails and nets to prevent the king from falling into the moat.</p><p>The confusion matrix for this combination demonstrates how the 2/3 strategy provides symmetric redundancy:</p><figure><figcaption>at least two of password, TOTP, or fingerprint</figcaption><table><thead><tr><th>user</th><th>access granted</th><th>access denied</th></tr></thead><tbody><tr><td>legitimate</td><td>~99.97%</td><td>~0.03%</td></tr><tr><td>hacker</td><td>~0.03%</td><td>~99.97%</td></tr></tbody></table></figure><p>While the chance that a hacker breaks into a 2/3 system is higher than the original 2- or 3-factor systems (~0.03% > 0.01% > 0.0001%), the chance that a user gets locked out is dramatically lower, even more so than the 1-factor system (0.03% &lt; 1.00%). This means that the overall chance of being hacked or locked out is lower than any other system.</p><h2 id=this-is-nothing-new>this is nothing new<a hidden class=anchor aria-hidden=true href=#this-is-nothing-new>#</a></h2><p>That being said, this strategy is already in use; I just wanted to give a name to it. For example, if you have 2-factor authentication enabled on your Google or Facebook accounts, they will allow you to receive a code from a text message in case you don&rsquo;t have your <a href=https://en.wikipedia.org/wiki/Time-based_one-time_password>TOTP</a> generator on you.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Okay, a more realistic situation is &ldquo;a hacker breaches GitHub&rsquo;s servers, downloads a list of everyone&rsquo;s <em>password hashes</em>, cracks the easiest ones, and sells the list to another hacker on some forum&rdquo;, but the same idea holds.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>There are other categories like &ldquo;somewhere you are&rdquo;, which is measured by the user&rsquo;s IP address at the time of login.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The probability that a legitimate user is denied access is $1-0.99^n$ , where $n$ is the number of factors required. Similarly, the probability that a hacker is granted access is $0.01^n$ . This model becomes more complicated if different factors have different false positive/negative rates or are combined in different ways (for example, one scheme could require either a password or a fingerprint).&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>This explicitly assumes that any given login attempt has an equal chance of being malicious or legitimate, and it implicitly assumes that the &ldquo;hacked&rdquo; and &ldquo;locked out&rdquo; events are equally bad. Neither of these assumptions are true for most systems.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>Using the fourth category of authentication factors &ldquo;location&rdquo;, one could implement a &ldquo;2/4&rdquo; or &ldquo;3/4&rdquo; strategy.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://hugo.roman.computer/discussions/><span class=title>¬´ Prev</span><br><span>üí¨ avoid large group discussions in your social events</span></a>
<a class=next href=https://hugo.roman.computer/information/><span class=title>Next ¬ª</span><br><span>üîç tools for finding information on the internet</span></a></nav></footer></article></main><footer class=footer><span><a href=https://creativecommons.org/licenses/by-sa/4.0/>(…î) CC BY-SA</a> ‚Ä¢
<a href=https://github.com/RomanHauksson/blog>source code</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML='<img src="/copy.png"/>';function s(){t.innerHTML='<img src="/copied.png"/>',setTimeout(()=>{t.innerHTML='<img src="/copy.png"/>'},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>